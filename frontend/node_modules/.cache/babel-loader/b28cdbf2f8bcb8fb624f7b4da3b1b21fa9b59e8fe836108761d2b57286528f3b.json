{"ast":null,"code":"var _jsxFileName = \"F:\\\\Projects\\\\Automation Dashboard\\\\frontend\\\\src\\\\components\\\\FacebookPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport apiClient from '../services/apiClient';\nimport './SocialMediaPage.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction FacebookPage() {\n  _s();\n  const navigate = useNavigate();\n  const {\n    user,\n    isAuthenticated: authIsAuthenticated,\n    logout\n  } = useAuth();\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('');\n\n  // Facebook OAuth states\n  const [pageAccessToken, setPageAccessToken] = useState('');\n  const [selectedPage, setSelectedPage] = useState(null);\n  const [availablePages, setAvailablePages] = useState([]); // Store all fetched pages\n  const [facebookConnected, setFacebookConnected] = useState(false);\n\n  // Auto-reply toggle state\n  const [autoReplyEnabled, setAutoReplyEnabled] = useState(false);\n\n  // Tab selection state\n  const [activeTab, setActiveTab] = useState('auto');\n\n  // Auto post states\n  const [autoFormData, setAutoFormData] = useState({\n    prompt: '',\n    mediaType: 'none',\n    // 'none', 'photo', 'video'\n    mediaFile: null,\n    generatedContent: '',\n    isGenerating: false\n  });\n\n  // Manual post states\n  const [manualFormData, setManualFormData] = useState({\n    message: '',\n    mediaType: 'none',\n    mediaFile: null\n  });\n\n  // Icon Components\n  const MessageIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 5\n  }, this);\n  const PageIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M13 2L3 14h9l-1 8 10-12h-9l1-8z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 49,\n    columnNumber: 5\n  }, this);\n  const ImageIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n      x: \"3\",\n      y: \"3\",\n      width: \"18\",\n      height: \"18\",\n      rx: \"2\",\n      ry: \"2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n      cx: \"8.5\",\n      cy: \"8.5\",\n      r: \"1.5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n      points: \"21,15 16,10 5,21\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 55,\n    columnNumber: 5\n  }, this);\n  const AutoReplyIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n  const LockIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: [/*#__PURE__*/_jsxDEV(\"rect\", {\n      x: \"3\",\n      y: \"11\",\n      width: \"18\",\n      height: \"11\",\n      rx: \"2\",\n      ry: \"2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"circle\", {\n      cx: \"12\",\n      cy: \"16\",\n      r: \"1\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M7 11V7a5 5 0 0 1 10 0v4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 69,\n    columnNumber: 5\n  }, this);\n  const RocketIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: [/*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 5\n  }, this);\n  const LogoutIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: [/*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"polyline\", {\n      points: \"16,17 21,12 16,7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"line\", {\n      x1: \"21\",\n      y1: \"12\",\n      x2: \"9\",\n      y2: \"12\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this);\n  const AutoIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 5\n  }, this);\n  const ManualIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 100,\n    columnNumber: 5\n  }, this);\n  const VideoIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: [/*#__PURE__*/_jsxDEV(\"polygon\", {\n      points: \"23 7 16 12 23 17 23 7\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"rect\", {\n      x: \"1\",\n      y: \"5\",\n      width: \"15\",\n      height: \"14\",\n      rx: \"2\",\n      ry: \"2\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n  const SparkleIcon = () => /*#__PURE__*/_jsxDEV(\"svg\", {\n    width: \"16\",\n    height: \"16\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\",\n    strokeWidth: \"2\",\n    children: /*#__PURE__*/_jsxDEV(\"path\", {\n      d: \"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.582a.5.5 0 0 1 0 .962L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0L9.937 15.5Z\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 5\n  }, this);\n\n  // Clean up any existing Facebook SDK instances\n  const cleanupFacebookSDK = () => {\n    const existingScript = document.getElementById('facebook-jssdk');\n    if (existingScript) {\n      existingScript.remove();\n    }\n    if (window.FB) {\n      delete window.FB;\n    }\n    if (window.fbAsyncInit) {\n      delete window.fbAsyncInit;\n    }\n  };\n\n  // Load Facebook SDK function\n  const loadFacebookSDK = () => {\n    return new Promise((resolve, reject) => {\n      cleanupFacebookSDK();\n      window.fbAsyncInit = function () {\n        try {\n          const appId = process.env.REACT_APP_FACEBOOK_APP_ID || '1526961221410200';\n          window.FB.init({\n            appId: appId,\n            cookie: true,\n            xfbml: true,\n            version: 'v19.0'\n          });\n\n          // Remove the automatic login status check since we'll handle it explicitly\n          resolve();\n        } catch (error) {\n          console.error('Facebook SDK initialization error:', error);\n          reject(error);\n        }\n      };\n      const script = document.createElement('script');\n      script.id = 'facebook-jssdk';\n      script.src = 'https://connect.facebook.net/en_US/sdk.js';\n      script.async = true;\n      script.defer = true;\n      script.crossOrigin = 'anonymous';\n      script.onerror = () => {\n        reject(new Error('Failed to load Facebook SDK script'));\n      };\n      document.body.appendChild(script);\n    });\n  };\n  const handleAutoInputChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    setAutoFormData(prev => ({\n      ...prev,\n      [name]: files ? files[0] : value\n    }));\n  };\n  const handleManualInputChange = e => {\n    const {\n      name,\n      value,\n      files\n    } = e.target;\n    setManualFormData(prev => ({\n      ...prev,\n      [name]: files ? files[0] : value\n    }));\n  };\n  const handleMediaTypeChange = (type, formType) => {\n    if (formType === 'auto') {\n      setAutoFormData(prev => ({\n        ...prev,\n        mediaType: type,\n        mediaFile: null\n      }));\n    } else {\n      setManualFormData(prev => ({\n        ...prev,\n        mediaType: type,\n        mediaFile: null\n      }));\n    }\n  };\n\n  // Generate content using Groq API\n  const generatePostContent = async () => {\n    if (!autoFormData.prompt.trim()) {\n      setConnectionStatus('âŒ Please enter a prompt for AI generation');\n      return;\n    }\n    setAutoFormData(prev => ({\n      ...prev,\n      isGenerating: true\n    }));\n    setConnectionStatus('ðŸ¤– Generating content with AI...');\n    try {\n      // Call your backend API to use Groq\n      const response = await apiClient.generateContent(autoFormData.prompt);\n      setAutoFormData(prev => ({\n        ...prev,\n        generatedContent: response.content,\n        isGenerating: false\n      }));\n      setConnectionStatus('âœ… Content generated successfully!');\n    } catch (error) {\n      console.error('Content generation error:', error);\n      setConnectionStatus('âŒ Failed to generate content: ' + (error.message || 'Unknown error'));\n      setAutoFormData(prev => ({\n        ...prev,\n        isGenerating: false\n      }));\n    }\n  };\n\n  // UPDATED: Replace Make.com auto-reply webhook with backend API\n  const handleAutoReplyToggle = async () => {\n    const newState = !autoReplyEnabled;\n    setAutoReplyEnabled(newState);\n    try {\n      setConnectionStatus('ðŸ”„ Updating auto-reply setting...');\n      await apiClient.toggleAutoReply((selectedPage === null || selectedPage === void 0 ? void 0 : selectedPage.id) || 'user_profile', newState, 'Thank you for your comment! We\\'ll get back to you soon.');\n      setConnectionStatus(`${newState ? 'âœ…' : 'âŒ'} Auto-reply ${newState ? 'enabled' : 'disabled'}`);\n    } catch (error) {\n      console.error('Auto-reply toggle error:', error);\n      setConnectionStatus('âŒ Failed to update auto-reply setting');\n      setAutoReplyEnabled(!newState); // Revert on error\n    }\n  };\n  const loginWithFacebook = async () => {\n    // Check HTTPS requirement first\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n      setConnectionStatus('âŒ Facebook login requires HTTPS. Please use https://localhost:3001 or deploy with HTTPS');\n      return;\n    }\n\n    // Check if user is still authenticated with our backend\n    try {\n      await apiClient.getCurrentUser();\n    } catch (error) {\n      setConnectionStatus('âŒ Your session has expired. Please log out and log back in to connect Facebook.');\n      setTimeout(() => {\n        logout();\n        navigate('/');\n      }, 3000);\n      return;\n    }\n    setIsConnecting(true);\n    setConnectionStatus('ðŸ“¦ Loading Facebook SDK...');\n    try {\n      await loadFacebookSDK();\n      if (!window.FB || typeof window.FB.login !== 'function') {\n        setConnectionStatus('âŒ Facebook SDK failed to load. Please refresh the page and try again.');\n        setIsConnecting(false);\n        return;\n      }\n      setConnectionStatus('ðŸ” Connecting to Facebook...');\n      window.FB.login(response => {\n        if (response.authResponse) {\n          setConnectionStatus('âœ… Facebook login successful!');\n          (async () => {\n            const {\n              mappedPages,\n              userInfo\n            } = await fetchPages(response.authResponse.accessToken);\n            await connectToBackend(response.authResponse.accessToken, userInfo, mappedPages);\n          })();\n        } else if (response.status === 'not_authorized') {\n          setConnectionStatus('âŒ Please authorize the app to continue and select at least one page.');\n          setIsConnecting(false);\n        } else {\n          setConnectionStatus('âŒ Facebook login cancelled or failed');\n          setIsConnecting(false);\n        }\n      }, {\n        scope: ['public_profile', 'pages_show_list', 'pages_read_engagement', 'pages_manage_posts', 'pages_manage_engagement', 'pages_read_user_content'].join(','),\n        enable_profile_selector: true,\n        return_scopes: true\n      });\n    } catch (error) {\n      console.error('Facebook login error:', error);\n      setConnectionStatus('âŒ Facebook login failed: ' + error.message);\n\n      // fetchPages function\n      const fetchPages = async accessToken => {\n        try {\n          // Get user info\n          const userInfo = await new Promise((resolve, reject) => {\n            window.FB.api('/me', {\n              access_token: accessToken,\n              fields: 'id,name,email'\n            }, response => {\n              if (response.error) reject(new Error(response.error.message));else resolve(response);\n            });\n          });\n          // Get user's pages with extended permissions\n          const pagesResponse = await new Promise((resolve, reject) => {\n            window.FB.api('/me/accounts', {\n              access_token: accessToken,\n              fields: 'id,name,category,access_token,picture,fan_count,tasks'\n            }, response => {\n              if (response.error) reject(new Error(response.error.message));else resolve(response);\n            });\n          });\n          const pages = pagesResponse.data || [];\n          const mappedPages = pages.map(page => {\n            var _page$picture, _page$picture$data;\n            return {\n              id: page.id,\n              name: page.name,\n              category: page.category || 'Page',\n              access_token: page.access_token,\n              profilePicture: ((_page$picture = page.picture) === null || _page$picture === void 0 ? void 0 : (_page$picture$data = _page$picture.data) === null || _page$picture$data === void 0 ? void 0 : _page$picture$data.url) || '',\n              canPost: true,\n              canComment: true,\n              followerCount: page.fan_count || 0\n            };\n          });\n          setAvailablePages(mappedPages);\n          // Page selection logic\n          if (mappedPages.length === 1) {\n            setSelectedPage(mappedPages[0]);\n            setPageAccessToken(mappedPages[0].access_token);\n            setConnectionStatus(`âœ… Connected successfully! 1 page found.`);\n          } else if (mappedPages.length > 1) {\n            setSelectedPage(null); // Prompt user to select a page\n            setPageAccessToken('');\n            setConnectionStatus(`âœ… Connected successfully! ${mappedPages.length} pages found. Please select a page below.`);\n          } else {\n            // Fallback to user profile if no pages available\n            setSelectedPage({\n              id: userInfo.id,\n              name: userInfo.name,\n              access_token: accessToken,\n              category: 'Personal Profile',\n              profilePicture: '',\n              email: userInfo.email || '',\n              isUserProfile: true,\n              canPost: true,\n              canComment: true,\n              followerCount: 0\n            });\n            setPageAccessToken(accessToken);\n            setConnectionStatus('âœ… Connected as personal profile (no pages found).');\n          }\n          setFacebookConnected(true);\n          setIsConnecting(false);\n          return {\n            mappedPages,\n            userInfo\n          };\n        } catch (error) {\n          console.error('Facebook API error:', error);\n          setConnectionStatus('âŒ Failed to get Facebook data: ' + (error.message || 'Unknown error'));\n          setIsConnecting(false);\n          setFacebookConnected(false);\n          return {\n            mappedPages: [],\n            userInfo: null\n          };\n        }\n      };\n\n      // connectToBackend function\n      const connectToBackend = async (accessToken, userInfo, mappedPages) => {\n        try {\n          await apiClient.connectFacebook(accessToken, userInfo === null || userInfo === void 0 ? void 0 : userInfo.id, mappedPages);\n        } catch (error) {\n          console.error('Backend connection error:', error);\n        }\n      };\n    }\n    ;\n\n    // ...\n\n    // Page selection UI if multiple pages exist\n    {\n      facebookConnected && availablePages.length > 1 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"page-select-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fb-page-select\",\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Select a Facebook Page:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 408,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"fb-page-select\",\n          value: selectedPage ? selectedPage.id : '',\n          onChange: e => {\n            const page = availablePages.find(p => p.id === e.target.value);\n            setSelectedPage(page);\n            setPageAccessToken((page === null || page === void 0 ? void 0 : page.access_token) || '');\n          },\n          style: {\n            marginLeft: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"-- Select Page --\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 7\n          }, this), availablePages.map(page => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: page.id,\n            children: [page.name, \" (\", page.category, \")\"]\n          }, page.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 9\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 5\n        }, this), selectedPage && /*#__PURE__*/_jsxDEV(\"span\", {\n          style: {\n            marginLeft: 12\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: selectedPage.profilePicture,\n            alt: \"\",\n            width: 32,\n            style: {\n              borderRadius: '50%',\n              verticalAlign: 'middle'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            style: {\n              marginLeft: 8\n            },\n            children: selectedPage.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 3\n      }, this);\n    }\n  };\n}\n_s(FacebookPage, \"A05lkg4E8PjaOH4wz4MLzNaZ91k=\", false, function () {\n  return [useNavigate, useAuth];\n});\n_c = FacebookPage;\nexport default FacebookPage;\nvar _c;\n$RefreshReg$(_c, \"FacebookPage\");","map":{"version":3,"names":["React","useState","useNavigate","useAuth","apiClient","jsxDEV","_jsxDEV","FacebookPage","_s","navigate","user","isAuthenticated","authIsAuthenticated","logout","isConnecting","setIsConnecting","connectionStatus","setConnectionStatus","pageAccessToken","setPageAccessToken","selectedPage","setSelectedPage","availablePages","setAvailablePages","facebookConnected","setFacebookConnected","autoReplyEnabled","setAutoReplyEnabled","activeTab","setActiveTab","autoFormData","setAutoFormData","prompt","mediaType","mediaFile","generatedContent","isGenerating","manualFormData","setManualFormData","message","MessageIcon","width","height","viewBox","fill","stroke","strokeWidth","children","d","fileName","_jsxFileName","lineNumber","columnNumber","PageIcon","ImageIcon","x","y","rx","ry","cx","cy","r","points","AutoReplyIcon","LockIcon","RocketIcon","LogoutIcon","x1","y1","x2","y2","AutoIcon","ManualIcon","VideoIcon","SparkleIcon","cleanupFacebookSDK","existingScript","document","getElementById","remove","window","FB","fbAsyncInit","loadFacebookSDK","Promise","resolve","reject","appId","process","env","REACT_APP_FACEBOOK_APP_ID","init","cookie","xfbml","version","error","console","script","createElement","id","src","async","defer","crossOrigin","onerror","Error","body","appendChild","handleAutoInputChange","e","name","value","files","target","prev","handleManualInputChange","handleMediaTypeChange","type","formType","generatePostContent","trim","response","generateContent","content","handleAutoReplyToggle","newState","toggleAutoReply","loginWithFacebook","location","protocol","hostname","getCurrentUser","setTimeout","login","authResponse","mappedPages","userInfo","fetchPages","accessToken","connectToBackend","status","scope","join","enable_profile_selector","return_scopes","api","access_token","fields","pagesResponse","pages","data","map","page","_page$picture","_page$picture$data","category","profilePicture","picture","url","canPost","canComment","followerCount","fan_count","length","email","isUserProfile","connectFacebook","className","htmlFor","onChange","find","p","style","marginLeft","alt","borderRadius","verticalAlign","_c","$RefreshReg$"],"sources":["F:/Projects/Automation Dashboard/frontend/src/components/FacebookPage.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../contexts/AuthContext';\nimport apiClient from '../services/apiClient';\nimport './SocialMediaPage.css';\n\nfunction FacebookPage() {\n  const navigate = useNavigate();\n  const { user, isAuthenticated: authIsAuthenticated, logout } = useAuth();\n  const [isConnecting, setIsConnecting] = useState(false);\n  const [connectionStatus, setConnectionStatus] = useState('');\n  \n  // Facebook OAuth states\n  const [pageAccessToken, setPageAccessToken] = useState('');\n  const [selectedPage, setSelectedPage] = useState(null);\nconst [availablePages, setAvailablePages] = useState([]); // Store all fetched pages\n  const [facebookConnected, setFacebookConnected] = useState(false);\n  \n  // Auto-reply toggle state\n  const [autoReplyEnabled, setAutoReplyEnabled] = useState(false);\n  \n  // Tab selection state\n  const [activeTab, setActiveTab] = useState('auto');\n  \n  // Auto post states\n  const [autoFormData, setAutoFormData] = useState({\n    prompt: '',\n    mediaType: 'none', // 'none', 'photo', 'video'\n    mediaFile: null,\n    generatedContent: '',\n    isGenerating: false\n  });\n  \n  // Manual post states\n  const [manualFormData, setManualFormData] = useState({\n    message: '',\n    mediaType: 'none',\n    mediaFile: null\n  });\n\n  // Icon Components\n  const MessageIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z\"></path>\n    </svg>\n  );\n\n  const PageIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M13 2L3 14h9l-1 8 10-12h-9l1-8z\"></path>\n    </svg>\n  );\n\n  const ImageIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <rect x=\"3\" y=\"3\" width=\"18\" height=\"18\" rx=\"2\" ry=\"2\"></rect>\n      <circle cx=\"8.5\" cy=\"8.5\" r=\"1.5\"></circle>\n      <polyline points=\"21,15 16,10 5,21\"></polyline>\n    </svg>\n  );\n\n  const AutoReplyIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"></path>\n    </svg>\n  );\n\n  const LockIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <rect x=\"3\" y=\"11\" width=\"18\" height=\"11\" rx=\"2\" ry=\"2\"></rect>\n      <circle cx=\"12\" cy=\"16\" r=\"1\"></circle>\n      <path d=\"M7 11V7a5 5 0 0 1 10 0v4\"></path>\n    </svg>\n  );\n\n  const RocketIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z\"></path>\n      <path d=\"M12 15l-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z\"></path>\n      <path d=\"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0\"></path>\n      <path d=\"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5\"></path>\n    </svg>\n  );\n\n  const LogoutIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4\"></path>\n      <polyline points=\"16,17 21,12 16,7\"></polyline>\n      <line x1=\"21\" y1=\"12\" x2=\"9\" y2=\"12\"></line>\n    </svg>\n  );\n\n  const AutoIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5\"/>\n    </svg>\n  );\n\n  const ManualIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z\"/>\n    </svg>\n  );\n\n  const VideoIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <polygon points=\"23 7 16 12 23 17 23 7\"></polygon>\n      <rect x=\"1\" y=\"5\" width=\"15\" height=\"14\" rx=\"2\" ry=\"2\"></rect>\n    </svg>\n  );\n\n  const SparkleIcon = () => (\n    <svg width=\"16\" height=\"16\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2\">\n      <path d=\"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.582a.5.5 0 0 1 0 .962L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0L9.937 15.5Z\"/>\n    </svg>\n  );\n\n  // Clean up any existing Facebook SDK instances\n  const cleanupFacebookSDK = () => {\n    const existingScript = document.getElementById('facebook-jssdk');\n    if (existingScript) {\n      existingScript.remove();\n    }\n    \n    if (window.FB) {\n      delete window.FB;\n    }\n    \n    if (window.fbAsyncInit) {\n      delete window.fbAsyncInit;\n    }\n  };\n\n  // Load Facebook SDK function\n  const loadFacebookSDK = () => {\n    return new Promise((resolve, reject) => {\n      cleanupFacebookSDK();\n      \n      window.fbAsyncInit = function () {\n        try {\n          const appId = process.env.REACT_APP_FACEBOOK_APP_ID || '1526961221410200';\n          \n          window.FB.init({\n            appId: appId,\n            cookie: true,\n            xfbml: true,\n            version: 'v19.0'\n          });\n\n          // Remove the automatic login status check since we'll handle it explicitly\n          resolve();\n        } catch (error) {\n          console.error('Facebook SDK initialization error:', error);\n          reject(error);\n        }\n      };\n\n      const script = document.createElement('script');\n      script.id = 'facebook-jssdk';\n      script.src = 'https://connect.facebook.net/en_US/sdk.js';\n      script.async = true;\n      script.defer = true;\n      script.crossOrigin = 'anonymous';\n\n      script.onerror = () => {\n        reject(new Error('Failed to load Facebook SDK script'));\n      };\n\n      document.body.appendChild(script);\n    });\n  };\n\n  const handleAutoInputChange = (e) => {\n    const { name, value, files } = e.target;\n    setAutoFormData(prev => ({\n      ...prev,\n      [name]: files ? files[0] : value\n    }));\n  };\n\n  const handleManualInputChange = (e) => {\n    const { name, value, files } = e.target;\n    setManualFormData(prev => ({\n      ...prev,\n      [name]: files ? files[0] : value\n    }));\n  };\n\n  const handleMediaTypeChange = (type, formType) => {\n    if (formType === 'auto') {\n      setAutoFormData(prev => ({\n        ...prev,\n        mediaType: type,\n        mediaFile: null\n      }));\n    } else {\n      setManualFormData(prev => ({\n        ...prev,\n        mediaType: type,\n        mediaFile: null\n      }));\n    }\n  };\n\n  // Generate content using Groq API\n  const generatePostContent = async () => {\n    if (!autoFormData.prompt.trim()) {\n      setConnectionStatus('âŒ Please enter a prompt for AI generation');\n      return;\n    }\n\n    setAutoFormData(prev => ({ ...prev, isGenerating: true }));\n    setConnectionStatus('ðŸ¤– Generating content with AI...');\n\n    try {\n      // Call your backend API to use Groq\n      const response = await apiClient.generateContent(autoFormData.prompt);\n      \n      setAutoFormData(prev => ({\n        ...prev,\n        generatedContent: response.content,\n        isGenerating: false\n      }));\n      \n      setConnectionStatus('âœ… Content generated successfully!');\n    } catch (error) {\n      console.error('Content generation error:', error);\n      setConnectionStatus('âŒ Failed to generate content: ' + (error.message || 'Unknown error'));\n      setAutoFormData(prev => ({ ...prev, isGenerating: false }));\n    }\n  };\n\n  // UPDATED: Replace Make.com auto-reply webhook with backend API\n  const handleAutoReplyToggle = async () => {\n    const newState = !autoReplyEnabled;\n    setAutoReplyEnabled(newState);\n    \n    try {\n      setConnectionStatus('ðŸ”„ Updating auto-reply setting...');\n      \n      await apiClient.toggleAutoReply(\n        selectedPage?.id || 'user_profile',\n        newState,\n        'Thank you for your comment! We\\'ll get back to you soon.'\n      );\n\n      setConnectionStatus(`${newState ? 'âœ…' : 'âŒ'} Auto-reply ${newState ? 'enabled' : 'disabled'}`);\n    } catch (error) {\n      console.error('Auto-reply toggle error:', error);\n      setConnectionStatus('âŒ Failed to update auto-reply setting');\n      setAutoReplyEnabled(!newState); // Revert on error\n    }\n  };\n\n  const loginWithFacebook = async () => {\n    // Check HTTPS requirement first\n    if (window.location.protocol !== 'https:' && window.location.hostname !== 'localhost') {\n      setConnectionStatus('âŒ Facebook login requires HTTPS. Please use https://localhost:3001 or deploy with HTTPS');\n      return;\n    }\n\n    // Check if user is still authenticated with our backend\n    try {\n      await apiClient.getCurrentUser();\n    } catch (error) {\n      setConnectionStatus('âŒ Your session has expired. Please log out and log back in to connect Facebook.');\n      setTimeout(() => {\n        logout();\n        navigate('/');\n      }, 3000);\n      return;\n    }\n\n    setIsConnecting(true);\n    setConnectionStatus('ðŸ“¦ Loading Facebook SDK...');\n\n    try {\n      await loadFacebookSDK();\n\n      if (!window.FB || typeof window.FB.login !== 'function') {\n        setConnectionStatus('âŒ Facebook SDK failed to load. Please refresh the page and try again.');\n        setIsConnecting(false);\n        return;\n      }\n\n      setConnectionStatus('ðŸ” Connecting to Facebook...');\n      \n      window.FB.login((response) => {\n        if (response.authResponse) {\n          setConnectionStatus('âœ… Facebook login successful!');\n          (async () => {\n            const { mappedPages, userInfo } = await fetchPages(response.authResponse.accessToken);\n            await connectToBackend(response.authResponse.accessToken, userInfo, mappedPages);\n          })();\n        } else if (response.status === 'not_authorized') {\n          setConnectionStatus('âŒ Please authorize the app to continue and select at least one page.');\n          setIsConnecting(false);\n        } else {\n          setConnectionStatus('âŒ Facebook login cancelled or failed');\n          setIsConnecting(false);\n        }\n      }, {\n        scope: [\n          'public_profile',\n          'pages_show_list',\n          'pages_read_engagement', \n          'pages_manage_posts',\n          'pages_manage_engagement',\n          'pages_read_user_content'\n        ].join(','),\n        enable_profile_selector: true,\n        return_scopes: true\n      });\n    } catch (error) {\n      console.error('Facebook login error:', error);\n      setConnectionStatus('âŒ Facebook login failed: ' + error.message);\n\n    // fetchPages function\n    const fetchPages = async (accessToken) => {\n      try {\n        // Get user info\n        const userInfo = await new Promise((resolve, reject) => {\n          window.FB.api('/me', { access_token: accessToken, fields: 'id,name,email' }, (response) => {\n            if (response.error) reject(new Error(response.error.message));\n            else resolve(response);\n          });\n        });\n        // Get user's pages with extended permissions\n        const pagesResponse = await new Promise((resolve, reject) => {\n          window.FB.api('/me/accounts', {\n            access_token: accessToken,\n            fields: 'id,name,category,access_token,picture,fan_count,tasks'\n          }, (response) => {\n            if (response.error) reject(new Error(response.error.message));\n            else resolve(response);\n          });\n        });\n        const pages = pagesResponse.data || [];\n        const mappedPages = pages.map(page => ({\n          id: page.id,\n          name: page.name,\n          category: page.category || 'Page',\n          access_token: page.access_token,\n          profilePicture: page.picture?.data?.url || '',\n          canPost: true,\n          canComment: true,\n          followerCount: page.fan_count || 0\n        }));\n        setAvailablePages(mappedPages);\n        // Page selection logic\n        if (mappedPages.length === 1) {\n          setSelectedPage(mappedPages[0]);\n          setPageAccessToken(mappedPages[0].access_token);\n          setConnectionStatus(`âœ… Connected successfully! 1 page found.`);\n        } else if (mappedPages.length > 1) {\n          setSelectedPage(null); // Prompt user to select a page\n          setPageAccessToken('');\n          setConnectionStatus(`âœ… Connected successfully! ${mappedPages.length} pages found. Please select a page below.`);\n        } else {\n          // Fallback to user profile if no pages available\n          setSelectedPage({\n            id: userInfo.id,\n            name: userInfo.name,\n            access_token: accessToken,\n            category: 'Personal Profile',\n            profilePicture: '',\n            email: userInfo.email || '',\n            isUserProfile: true,\n            canPost: true,\n            canComment: true,\n            followerCount: 0\n          });\n          setPageAccessToken(accessToken);\n          setConnectionStatus('âœ… Connected as personal profile (no pages found).');\n        }\n        setFacebookConnected(true);\n        setIsConnecting(false);\n        return { mappedPages, userInfo };\n      } catch (error) {\n        console.error('Facebook API error:', error);\n        setConnectionStatus('âŒ Failed to get Facebook data: ' + (error.message || 'Unknown error'));\n        setIsConnecting(false);\n        setFacebookConnected(false);\n        return { mappedPages: [], userInfo: null };\n      }\n    };\n\n    // connectToBackend function\n    const connectToBackend = async (accessToken, userInfo, mappedPages) => {\n      try {\n        await apiClient.connectFacebook(\n          accessToken,\n          userInfo?.id,\n          mappedPages\n        );\n      } catch (error) {\n        console.error('Backend connection error:', error);\n      }\n    };\n\n};\n\n// ...\n\n// Page selection UI if multiple pages exist\n{facebookConnected && availablePages.length > 1 && (\n  <div className=\"page-select-section\">\n    <label htmlFor=\"fb-page-select\"><strong>Select a Facebook Page:</strong></label>\n    <select\n      id=\"fb-page-select\"\n      value={selectedPage ? selectedPage.id : ''}\n      onChange={e => {\n        const page = availablePages.find(p => p.id === e.target.value);\n        setSelectedPage(page);\n        setPageAccessToken(page?.access_token || '');\n      }}\n      style={{ marginLeft: 8 }}\n    >\n      <option value=\"\">-- Select Page --</option>\n      {availablePages.map(page => (\n        <option key={page.id} value={page.id}>\n          {page.name} ({page.category})\n        </option>\n      ))}\n    </select>\n    {selectedPage && (\n      <span style={{ marginLeft: 12 }}>\n        <img src={selectedPage.profilePicture} alt=\"\" width={32} style={{ borderRadius: '50%', verticalAlign: 'middle' }} />\n        <span style={{ marginLeft: 8 }}>{selectedPage.name}</span>\n      </span>\n    )}\n  </div>\n)}\n  }}\nexport default FacebookPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}